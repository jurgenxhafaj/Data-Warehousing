-- JURGEN XHAFAJ
-- DATA WAREHOUSING SPRING 2018
-- THIS IS THE CODE THAT I USED TO CREATE THE TABLES AND THE RESPECTIVE PRIMARY AND FOREIGN KEYS.



CREATE TABLE NAME_LU2 (
    ID          NUMBER (4,0)     NOT NULL,
    NAME        VARCHAR2(26)     NOT NULL,
    FULL_NAME   VARCHAR2(128)    NOT NULL,
    TIER        NUMBER  (1,0)    NOT NULL,
    COUNTRY     VARCHAR2(26)     NOT NULL,
    CLASS       VARCHAR2(3)      NOT NULL,
    
    CONSTRAINT PK_NAME_LU2 PRIMARY KEY (FULL_NAME)
);
-- CONSTRAINT FK_NAME_LU_C FOREIGN KEY (COUNTRY) REFERENCES NATIONS(NAME)
-- CONSTRAINT FK_NAME_LU_T FOREIGN KEY (TIER) REFERENCES PRICES(TIER)



CREATE TABLE MY_STATS2 (
    ID          NUMBER (4,0)     NOT NULL,
    NAME        VARCHAR2(26)     NOT NULL,
    IN_GARAGE   VARCHAR2(1)      NOT NULL,
    MY_BATTLES  NUMBER(5,0)      NOT NULL,
    MY_DAMAGE   NUMBER(6,2)      NOT NULL,
    MY_WIN_RATE NUMBER(4,2)      NOT NULL,
    OPINION     VARCHAR2(3)      NOT NULL,
    
    CONSTRAINT PK_MY_STATS2 PRIMARY KEY (ID, NAME, IN_GARAGE),
    CONSTRAINT CHECK_MY_STATS2 CHECK (MY_BATTLES>0)
);
-- CONSTRAINT FK_MY_STATS FOREIGN KEY (NAME) REFERENCES NAME_LU(NAME)



CREATE TABLE PREM_SHOP2 (
    NAME          VARCHAR2(26)     NOT NULL,
    TECH_TREE     VARCHAR2(2)      NOT NULL,
    PREM_SHOP_NA  VARCHAR2(1)      NOT NULL,
    PREM_SHOP_EU  VARCHAR2(1)      NOT NULL,
    PREM_SHOP_SEA VARCHAR2(1)      NOT NULL,
    PREM_SHOP_RU  VARCHAR2(1)      NOT NULL,
    
    CONSTRAINT PK_PREM_SHOP2 PRIMARY KEY (NAME, PREM_SHOP_NA)
);
-- CONSTRAINT FK_PREM_SHOP FOREIGN KEY (NAME) REFERENCES NAME_LU(NAME)



CREATE TABLE NATIONS2 (
    CD                VARCHAR2(2)     NOT NULL,
    COUNTRY           VARCHAR(26)     NOT NULL,
    FULL_COUNTRY_NAME VARCHAR2(128)   NOT NULL,
    
    CONSTRAINT PK_NATIONS2 PRIMARY KEY (CD, COUNTRY)
);
-- CONSTRAINT FK_NATIONS FOREIGN KEY (CD) REFERENCES PRICES(CD)



CREATE TABLE PRICES2 (
    NAME          VARCHAR2(26)     NOT NULL,
    TIER          NUMBER(1)        NOT NULL,
    MIN_BUNDLE    NUMBER(4,2)      NOT NULL,
    PREF_MM       VARCHAR2(1)      NOT NULL,
    LAST_SOLD     DATE             NOT NULL,
    CD            VARCHAR2(2)      NOT NULL,
    
    CONSTRAINT PK_PRICES2 PRIMARY KEY (NAME, TIER, MIN_BUNDLE),
    CONSTRAINT CHECK_DATE CHECK (LAST_SOLD<'17-APR-2018')
);
-- CONSTRAINT FK_PRICES FOREIGN KEY (CD) REFERENCES NATIONS(CD)



CREATE TABLE BATTLE_STATS2 (
    ID          NUMBER (4,0)     NOT NULL,
    NR_BATTLES  NUMBER (5,0)     NOT NULL,
    WIN_RATE    NUMBER (6,2)     NOT NULL,
    DAMAGE      NUMBER (7,2)     NOT NULL,
    
    CONSTRAINT PK_BATTLE_STATS2 PRIMARY KEY (ID, NR_BATTLES)  
);
-- CONSTRAINT FK_BATTLE_STATS FOREIGN KEY (ID) REFERENCES NAME_LU(ID)


